<div class="dash container">

  <div class="head">
    <div>
      <h2>Dashboard</h2>
      <div class="sub">Summary for
        <strong>{{ month() | date:'MMMM yyyy' }}</strong>
      </div>
    </div>
    <div class="actions">
      <button nz-button nzType="default" (click)="prevMonth()">‹ Prev</button>
+ <button nz-button nzType="default" (click)="setMonthToday()">Today</button>
      <button nz-button nzType="default" (click)="nextMonth()">Next ›</button>
      <button nz-button nzType="primary" (click)="fetchAll()">Refresh</button>
    </div>
  </div>

  <nz-spin [nzSpinning]="loading()">
    <!-- KPIs -->
    <div nz-row [nzGutter]="16" class="kpis">
      <div nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <nz-card class="kpi">
          <div class="kpi-title">Workout Days</div>
          <div class="kpi-value">{{ kpi_workoutDays() }}</div>
        </nz-card>
      </div>

      <div nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <nz-card class="kpi">
          <div class="kpi-title">Total Sessions</div>
          <div class="kpi-value">{{ kpi_totalSessions() }}</div>
        </nz-card>
      </div>

      <div nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <nz-card class="kpi">
          <div class="kpi-title">Total Minutes</div>
          <div class="kpi-value">{{ kpi_totalMinutes() }}</div>
        </nz-card>
      </div>

      <div nz-col [nzXs]="24" [nzSm]="12" [nzLg]="6">
        <nz-card class="kpi">
          <div class="kpi-title">Unique Exercises</div>
          <div class="kpi-value">{{ kpi_uniqueExercises() }}</div>
        </nz-card>
      </div>
    </div>

    <!-- Charts -->
    <div nz-row [nzGutter]="16" class="charts">
      <div nz-col [nzXs]="24" [nzLg]="14">
        <nz-card nzTitle="Daily volume">
          <apx-chart
            [series]="lineSeries"
            [chart]="lineOpts"
            [xaxis]="lineOpts.xaxis"
            [dataLabels]="lineOpts.dataLabels"
            [stroke]="lineOpts.stroke"
            [fill]="lineOpts.fill"
            [tooltip]="lineOpts.tooltip"
            [legend]="lineOpts.legend">
          </apx-chart>
        </nz-card>
      </div>

      <div nz-col [nzXs]="24" [nzLg]="10">
        <nz-card nzTitle="Muscle groups (top 6)">
          <apx-chart
            [series]="barSeries"
            [chart]="barOpts"
            [plotOptions]="barOpts.plotOptions"
            [xaxis]="barOpts.xaxis"
            [dataLabels]="barOpts.dataLabels"
            [legend]="barOpts.legend">
          </apx-chart>
        </nz-card>
      </div>

      <div nz-col [nzXs]="24" [nzLg]="10">
        <nz-card nzTitle="Difficulty split">
          <apx-chart
            [series]="donutSeries"
            [chart]="donutOpts"
            [labels]="donutLabels"
            [legend]="donutOpts.legend"
            [responsive]="donutOpts.responsive">
          </apx-chart>
        </nz-card>
      </div>

      <div nz-col [nzXs]="24" [nzLg]="14">
        <nz-card class="tips" nzTitle="This month quick facts">
          <ul>
            <li>Active days: <strong>{{ kpi_workoutDays() }}</strong></li>
            <li>Total sessions: <strong>{{ kpi_totalSessions() }}</strong></li>
            <li>Total minutes: <strong>{{ kpi_totalMinutes() }}</strong></li>
            <li>Unique exercises: <strong>{{ kpi_uniqueExercises() }}</strong></li>
          </ul>
        </nz-card>
      </div>
    </div>
  </nz-spin>
</div>
