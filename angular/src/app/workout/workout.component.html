<div class="container mt-4">
  <h2>Workouts</h2>

  <!-- Form -->
  <form [formGroup]="form" (ngSubmit)="saveWorkout()" class="mb-3 row g-2">
    <div class="col">
      <input formControlName="name" class="form-control" placeholder="Workout name" />
    </div>

    <div class="col">
      <select formControlName="exerciseId" class="form-select">
        <option value="" disabled>Select exercise</option>
        <option *ngFor="let ex of exercises" [value]="ex.id">{{ ex.name }}</option>
      </select>
    </div>

    <div class="col">
      <input type="number" formControlName="sets" class="form-control" placeholder="Sets" />
    </div>

    <div class="col">
      <input type="number" formControlName="reps" class="form-control" placeholder="Reps" />
    </div>

    <div class="col">
      <input type="number" formControlName="weight" class="form-control" placeholder="Weight (kg)" />
    </div>

    <div class="col">
      <button type="submit" class="btn btn-primary">Add Workout</button>
    </div>
  </form>

  <!-- Liste -->
  <div *ngIf="loading">Loading...</div>

  <table class="table table-striped" *ngIf="!loading">
    <thead>
      <tr>
        <th>Name</th>
        <th>Exercises</th>
        <th>Actions</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let w of workouts">
        <td>{{ w.name }}</td>
        <td>
          <ul class="mb-0">
            <li *ngFor="let ex of w.exercises">
              {{ ex.exerciseName }} - {{ ex.sets }}x{{ ex.reps }}
              <span *ngIf="ex.weight">({{ ex.weight }} kg)</span>
            </li>
          </ul>
        </td>
        <td>
          <button class="btn btn-sm btn-danger" (click)="deleteWorkout(w.id)">Delete</button>
        </td>
      </tr>
    </tbody>
  </table>
</div>
