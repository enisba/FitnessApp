# FitnessApp

A comprehensive **fullstack workout and nutrition tracking application**. This platform is designed to provide users with a complete system for exercise planning, meal logging, and macro target monitoring, built on a modular and scalable architecture.

---

## Key Features

### Security and Authorization
* **Authentication/Authorization:** Implemented using **OpenIddict** and **JWT (JSON Web Tokens)** for secure, token-based access.

### Exercise Module
* **Data Structure:** Manages data based on **muscle groups, equipment, and difficulty levels**.
* **API Capabilities:** Full support for **paging, sorting, and filtering** of exercise data.

### Nutrition Module
* **Tracking:** Functionality for logging **Foods** and complete **Meals**.
* **Monitoring:** Keeps **Daily Logs** and allows users to set and track **Macro Targets** (Designed with extensibility in mind).

### Developer Experience
* **API Documentation:** Interactive documentation via **Swagger UI**.
* **Frontend Integration:** Automated **Angular HTTP Proxies** generated by the ABP CLI for seamless, type-safe communication with the backend.

---

## Tech Stack

The application leverages a modern, robust technology stack.

### Backend
* **Framework:** **ASP.NET Core**
* **Architecture:** **ABP (Application Development Platform)**
* **ORM:** **EF Core (Entity Framework Core)**
* **Security:** **OpenIddict**

### Database
* **SQL Server** (Supports **LocalDB** or **SQL Server Express** for development)

### Frontend
* **Framework:** **Angular**
* **UI Library:** **ABP Angular UI**

### Tools
* **CLI:** **ABP CLI**, **EF Core CLI**

---

## Modules and API Endpoints

### Exercise Module

#### Entities
| Entity Name | Description |
| :--- | :--- |
| **MuscleGroup** | The targeted muscle group. |
| **Equipment** | The required fitness equipment. |
| **Difficulty** | The exercise difficulty level. |
| **Exercise** | Core exercise information. |
| **ExerciseEquipment** | Many-to-many relationship between Exercise and Equipment. |

#### API Endpoints (`/api/app/exercise`)
| Method | Endpoint | Description | Query Parameters |
| :--- | :--- | :--- | :--- |
| `GET` | `/api/app/exercise` | Retrieves a list of exercises. | `muscleId`, `equipment`, `difficulty`, `skipCount`, `maxResultCount`, `sorting` |
| `GET` | `/api/app/exercise/{id}` | Retrieves a specific exercise. | - |
| `POST` | `/api/app/exercise` | Creates a new exercise. | - |
| `PUT` | `/api/app/exercise/{id}` | Updates an existing exercise. | - |
| `DELETE` | `/api/app/exercise/{id}` | Deletes a specific exercise. | - |

*(Note: Sorting and filtering logic is implemented within the `ExerciseAppService` in the backend.)*

---

### Nutrition Module

**Planned Domain Entities:** `Food`, `Meal`, `DailyLog`, `MacroTargets`.

* The module tracks daily totals and meal breakdowns.
* **Design Note:** The Nutrition module is designed to be **modular** and evolve **independently** of the Exercise module. The UI can be added later, as the API surface is stable and modular.

---

## Setup and Configuration

### 1. Database Configuration

Set the database connection strings in the appropriate application settings files (`appsettings.json` for `HttpApi.Host` and `DbMigrator`):

| Database Type | Connection String Example |
| :--- | :--- |
| **SQL Server LocalDB** | `"Server=(localdb)\\MSSQLLocalDB;Database=FitnessApp;Trusted_Connection=True;TrustServerCertificate=True"` |
| **SQL Server Express** | `"Server=localhost\\SQLEXPRESS;Database=FitnessApp;Trusted_Connection=True;TrustServerCertificate=True"` |

### 2. Application Settings Review

Ensure the following application settings are correctly configured:

* `App:SelfUrl`, `App:ClientUrl`, `App:CorsOrigins`
* `OpenIddict:Applications.*` (Check client IDs and root URLs for Angular and Swagger)

### 3. EF Core Migrations

Navigate to the **`aspnet-core/`** directory and run the following commands sequentially:

1.  **Add Migration:**
    ```bash
    dotnet ef migrations add Init --project src/FitnessApp.EntityFrameworkCore --startup-project src/FitnessApp.DbMigrator
    ```
2.  **Update Database:**
    ```bash
    dotnet ef database update --project src/FitnessApp.EntityFrameworkCore --startup-project src/FitnessApp.DbMigrator
    ```

### 4. Angular Proxy Generation

With the backend host (`FitnessApp.HttpApi.Host`) **running**, navigate to the **`angular/`** directory and run this command to automatically generate Angular HTTP service proxies:

```bash
abp generate-proxy -t ng
